<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FancyMenu Video Player - Standalone Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f0f0f0;
            color: #333;
        }

        h1 {
            color: #444;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .player-container {
            position: relative;
            width: 640px;
            height: 360px;
            margin: 20px auto;
            border: 1px solid #ccc;
            background-color: #000;
        }

        #videoContainer {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        video {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .fill-screen video {
            object-fit: cover;
            width: 100%;
            height: 100%;
        }

        .controls {
            margin: 20px 0;
            padding: 15px;
            background-color: #f8f8f8;
            border-radius: 5px;
        }

        .control-group {
            margin-bottom: 15px;
        }

        label {
            display: inline-block;
            width: 150px;
            font-weight: bold;
        }

        button {
            padding: 8px 15px;
            margin-right: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        button:hover {
            background-color: #45a049;
        }

        input[type="range"] {
            width: 200px;
            vertical-align: middle;
        }

        input[type="file"] {
            padding: 8px;
            margin-top: 10px;
        }

        input[type="checkbox"] {
            transform: scale(1.2);
            margin-right: 5px;
        }

        .debug-info {
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f8f8;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-family: monospace;
            max-height: 200px;
            overflow-y: auto;
        }

        #urlInput {
            width: 400px;
            padding: 8px;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>FancyMenu Video Player - Standalone Test</h1>
        <p>This is a standalone test for the FancyMenu video player. You can use this to verify if the player works correctly outside of Minecraft.</p>
        
        <div class="player-container">
            <div id="videoContainer">
                <video id="videoPlayer"></video>
            </div>
        </div>
        
        <div class="controls">
            <div class="control-group">
                <label>Video Source:</label>
                <input type="text" id="urlInput" placeholder="Enter URL or use file selector below">
                <button id="loadUrlBtn">Load URL</button>
            </div>
            
            <div class="control-group">
                <label>Local File:</label>
                <input type="file" id="fileInput" accept="video/*">
            </div>
            
            <div class="control-group">
                <button id="playBtn">Play</button>
                <button id="pauseBtn">Pause</button>
                <button id="stopBtn">Stop</button>
            </div>
            
            <div class="control-group">
                <label>Volume:</label>
                <input type="range" id="volumeSlider" min="0" max="1" step="0.1" value="1">
                <span id="volumeValue">100%</span>
            </div>
            
            <div class="control-group">
                <label>Seek:</label>
                <input type="range" id="seekSlider" min="0" max="100" value="0">
                <span id="currentTime">0:00</span> / <span id="duration">0:00</span>
            </div>
            
            <div class="control-group">
                <label>
                    <input type="checkbox" id="loopCheckbox"> Loop Video
                </label>
            </div>
            
            <div class="control-group">
                <label>
                    <input type="checkbox" id="fillScreenCheckbox"> Fill Screen
                </label>
            </div>
        </div>
        
        <div class="debug-info">
            <h3>Debug Information</h3>
            <div id="debugInfo">No video loaded yet</div>
        </div>
    </div>
    
    <script>
        // Initialize player
        const videoPlayer = document.getElementById('videoPlayer');
        const videoContainer = document.getElementById('videoContainer');
        const urlInput = document.getElementById('urlInput');
        const fileInput = document.getElementById('fileInput');
        const loadUrlBtn = document.getElementById('loadUrlBtn');
        const playBtn = document.getElementById('playBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const stopBtn = document.getElementById('stopBtn');
        const volumeSlider = document.getElementById('volumeSlider');
        const volumeValue = document.getElementById('volumeValue');
        const seekSlider = document.getElementById('seekSlider');
        const currentTimeDisplay = document.getElementById('currentTime');
        const durationDisplay = document.getElementById('duration');
        const loopCheckbox = document.getElementById('loopCheckbox');
        const fillScreenCheckbox = document.getElementById('fillScreenCheckbox');
        const debugInfo = document.getElementById('debugInfo');
        
        // Debug logging function
        function logDebug(message) {
            console.log(message);
            debugInfo.innerHTML += `<div>${message}</div>`;
            debugInfo.scrollTop = debugInfo.scrollHeight;
        }
        
        // Clear debug log
        function clearDebug() {
            debugInfo.innerHTML = '';
        }
        
        // Format time in MM:SS format
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            seconds = Math.floor(seconds % 60);
            return `${minutes}:${seconds < 10 ? '0' + seconds : seconds}`;
        }
        
        // Update all player information
        function updatePlayerInfo() {
            // Update playback info
            currentTimeDisplay.textContent = formatTime(videoPlayer.currentTime);
            durationDisplay.textContent = formatTime(videoPlayer.duration || 0);
            
            // Update seek slider without triggering the input event
            if (!seekSliderDragging) {
                seekSlider.value = (videoPlayer.currentTime / videoPlayer.duration) * 100 || 0;
            }
            
            // Log video properties
            const videoInfo = `
                Status: ${videoPlayer.paused ? 'Paused' : 'Playing'}
                Current Time: ${videoPlayer.currentTime.toFixed(2)}s / ${videoPlayer.duration ? videoPlayer.duration.toFixed(2) + 's' : 'Unknown'}
                Volume: ${(videoPlayer.volume * 100).toFixed(0)}%
                Muted: ${videoPlayer.muted}
                Loop: ${videoPlayer.loop}
                Video Width: ${videoPlayer.videoWidth}px
                Video Height: ${videoPlayer.videoHeight}px
                Fill Screen: ${videoContainer.classList.contains('fill-screen')}
                Video URL: ${videoPlayer.currentSrc || 'None'}
            `;
            
            debugInfo.textContent = videoInfo;
        }
        
        // Load video function
        function loadVideo(source) {
            clearDebug();
            logDebug(`Loading video: ${source}`);
            
            videoPlayer.src = source;
            videoPlayer.load();
            videoPlayer.play().catch(e => {
                logDebug(`Autoplay prevented: ${e.message}`);
            });
        }
        
        // Event listeners
        loadUrlBtn.addEventListener('click', () => {
            if (urlInput.value) {
                loadVideo(urlInput.value);
            }
        });
        
        fileInput.addEventListener('change', (e) => {
            if (fileInput.files && fileInput.files[0]) {
                const fileURL = URL.createObjectURL(fileInput.files[0]);
                urlInput.value = 'Local file: ' + fileInput.files[0].name;
                loadVideo(fileURL);
            }
        });
        
        playBtn.addEventListener('click', () => {
            videoPlayer.play();
            logDebug('Play button clicked');
        });
        
        pauseBtn.addEventListener('click', () => {
            videoPlayer.pause();
            logDebug('Pause button clicked');
        });
        
        stopBtn.addEventListener('click', () => {
            videoPlayer.pause();
            videoPlayer.currentTime = 0;
            logDebug('Stop button clicked');
        });
        
        let seekSliderDragging = false;
        
        seekSlider.addEventListener('mousedown', () => {
            seekSliderDragging = true;
        });
        
        seekSlider.addEventListener('mouseup', () => {
            seekSliderDragging = false;
        });
        
        seekSlider.addEventListener('input', () => {
            const seekTime = (seekSlider.value / 100) * videoPlayer.duration;
            videoPlayer.currentTime = seekTime;
            currentTimeDisplay.textContent = formatTime(seekTime);
        });
        
        volumeSlider.addEventListener('input', () => {
            videoPlayer.volume = volumeSlider.value;
            volumeValue.textContent = `${Math.round(volumeSlider.value * 100)}%`;
            logDebug(`Volume changed to ${Math.round(volumeSlider.value * 100)}%`);
        });
        
        loopCheckbox.addEventListener('change', () => {
            videoPlayer.loop = loopCheckbox.checked;
            logDebug(`Loop ${loopCheckbox.checked ? 'enabled' : 'disabled'}`);
        });
        
        fillScreenCheckbox.addEventListener('change', () => {
            if (fillScreenCheckbox.checked) {
                videoContainer.classList.add('fill-screen');
            } else {
                videoContainer.classList.remove('fill-screen');
            }
            logDebug(`Fill screen ${fillScreenCheckbox.checked ? 'enabled' : 'disabled'}`);
        });
        
        // Video event listeners
        videoPlayer.addEventListener('loadedmetadata', () => {
            logDebug('Video metadata loaded');
            updatePlayerInfo();
        });
        
        videoPlayer.addEventListener('play', () => {
            logDebug('Video playing');
            updatePlayerInfo();
        });
        
        videoPlayer.addEventListener('pause', () => {
            logDebug('Video paused');
            updatePlayerInfo();
        });
        
        videoPlayer.addEventListener('ended', () => {
            logDebug('Video ended');
            updatePlayerInfo();
        });
        
        videoPlayer.addEventListener('timeupdate', () => {
            updatePlayerInfo();
        });
        
        videoPlayer.addEventListener('error', (e) => {
            logDebug(`Video error: ${videoPlayer.error ? videoPlayer.error.message : e}`);
        });
        
        // Parse URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const initialVolume = parseFloat(urlParams.get('volume')) || 1.0;
        const initialLoop = urlParams.get('loop') === 'true';
        const initialFillScreen = urlParams.get('fillScreen') === 'true';
        const videoPath = urlParams.get('video') || '';
        
        // Apply initial settings
        videoPlayer.volume = initialVolume;
        volumeSlider.value = initialVolume;
        volumeValue.textContent = `${Math.round(initialVolume * 100)}%`;
        
        videoPlayer.loop = initialLoop;
        loopCheckbox.checked = initialLoop;
        
        if (initialFillScreen) {
            videoContainer.classList.add('fill-screen');
            fillScreenCheckbox.checked = true;
        }
        
        // Load video if provided in URL
        if (videoPath) {
            urlInput.value = videoPath;
            loadVideo(videoPath);
        }
        
        // Initial log
        logDebug('Video player initialized');
        logDebug(`Browser: ${navigator.userAgent}`);
        if (videoPath) {
            logDebug(`Initial video from URL parameters: ${videoPath}`);
        }
    </script>
</body>
</html>