
## CHANGELOG | FANCYMENU v3.9.0 [ W I P !! Not public yet !! ]

### New Features and Improvements

- Added a new kind/category of customizations: Global Customizations (#1355)
  - These customizations are different to most others in the mod, because they do not need you to enable customizations for a screen to apply them
  - Can be accessed via "menu bar -> Customization -> Global Customizations" while NOT in the layout editor
  - Allows you to change Vanilla button textures globally for all screens without using a resource pack
  - Allows you to change Vanilla menu music globally for all screens without using a resource pack
  - Many of the customization options previously located in "menu bar -> Customization -> Settings" (like custom window icon/title, etc.) are now located in the new "Global Customizations" menu
- Added a new system: Schedulers (#1498)
  - Schedulers run action scripts automatically and can constantly repeat them with customizable tick delay
  - Schedulers work independent of screens, so they can run the whole time, even when no screen is open (in a world/server)
  - Schedulers can get set to start automatically on game launch
  - There are actions to start and stop schedulers by its ID
  - There is a requirement that checks if a scheduler is running by its ID
  - To access schedulers, click on "menu bar -> Customization -> Manage Schedulers" while not in the layout editor
  - Schedulers can be seen as the "better" Ticker elements (I don't see why you should continue using tickers tbh, because schedulers are more powerful and easier to organize)
- Added a new type of fullscreen customization: Decoration Overlays
  - These overlays have pre-defined overlay types, similar to menu background types and they can be toggled on/off for each overlay type
  - Decoration overlays can be accessed via right-clicking the layout editor background -> Decoration Overlays
  - Currently there are the following overlay types available:
    - Snowfall, that makes it snow in your menus with snow accumulation on the ground and buttons (with customizable snow color and intensity)
    - Rainfall, that makes it rain in menus, with forming puddles and dripping water from buttons (with customizable rain color and intensity)
    - Fireflies, to have groups of fireflies fly around in the menu and sometimes landing on the ground and on buttons (with customizable color, group amount, group density, group size, etc.)
      - Firefly groups will follow the mouse when you get close to them with the cursor
    - String Lights, to have lots of possible string lights hang in the menu (it's possible to enable/disable each possible string light to create unique combinations with custom light color support, etc.)
    - Leaves, to show colorful leaves falling down and landing on buttons and the bottom of the menu (lots of customization options!)
    - Fireworks, for, well, fireworks of course! Loooots of fireworks!
    - Confetti, to make confetti rain in the menu (with an option to make confetti come out of your mouse cursor on click instead of confetti rain)
- Added new FancyMenu UI scales which will make it easier to find the correct UI scale for your monitor resolution
  - When the scale is set to Auto, the smallest scale is now 1.25 (was 1 before), because 1.25 looks way better on 1080p monitors (you can still manually set scale 1 if you prefer that)
- Added a file browser for Minecraft resources to the "Choose Resource" screen, so you can now browse nearly all resources loaded via resource packs like a normal directory
- Added click events to Markdown, which let's you use a listener to listen for specific text clicks in Markdown text (used for the Text element, etc.) (#1366)
  - The formatting for a click event is very similar to hyperlinks: "[some clickable text](click:unique_text_click_event_id)"
  - Listen to text clicks by using the "On Markdown Text Clicked" listener
- Added hover events to Markdown, which let's you use a listener to listen for specific text hovers in Markdown text (used for the Text element, etc.) (#1366)
  - The formatting for a hover event is very similar to hyperlinks: "[some hoverable text](hover:unique_text_hover_event_id)"
  - Listen to text hovers by using the "On Markdown Text Hovered" listener
- Added a "timing offset" feature to the "Element Animator" element that makes it possible to apply start timing offsets individually for each controlled element (#1379)
  - There's also a "random timing offset" mode that randomly applies offsets in a specified range to all controlled elements
- Added a "Delay" block to the action script system that waits for the specified time before running its contained actions (The rest of the script keeps running while the delay counts down) (#1397)
- Added a "Variable Mode" for the "Checkbox" element that lets you link checkboxes directly to a FancyMenu variable (#1256)
- Added "Title Case Text" placeholder that converts the input text to "Title Case" (#1502)
- Added "Sentence Case Text" placeholder that converts the input text to "Sentence case" (#1502)
- Added "Snake Case Text" placeholder that converts the input text to "snake_case" (#1502)
- Added "Kebab Case Text" placeholder that converts the input text to "kebab-case" (#1502)
- Added "Alternating Case Text" placeholder that converts the input text to "aLtErNaTiNg CaSe" (#1502)
- Added "Toggle Case Text" placeholder that toggles the case of each letter in the input text, like this: "tOGGLE cASE" (#1502)
- Added "Encode To Base64" placeholder to encode the given text to Base64 (#1473)
- Added "Decode From Base64" placeholder to decode a Base64 string back to plain text (#1473)
- Added "Text Input Field Value" placeholder that returns the current value of an input field (text box) by its element identifier (#1391)
- Added "Current World Seed" placeholder that returns the seed of the current world (#1354)
- Added "Clicks Per Second" placeholder that returns the clicks per second (CPS) for the given mouse button (left/right) (#1383)
- Added "Slot Item Durability" placeholder that returns durability information of the item in the given inventory slot (#1382)
  - Supports multiple return formats (current, max, damage, percentage)
- Added "Player Armor Toughness" placeholder that returns the player's total armor toughness (#1384)
- Added "Inventory Item Count" placeholder that returns the total count of an item type in the player inventory (#1386)
- Added "Slot Item Count" placeholder that returns the item count of the item in the given inventory slot (#1385)
- Added "Slot Item Food Point Restore Amount" placeholder that returns the amount of food/hunger points the food in the given slot would restore when eating it (#1418)
- Added "Current Player Hunger Saturation" placeholder that returns the saturation level of the player (#1416)
- Added "Current Biome" placeholder that returns the biome the player is in (has option to return the display name of biomes, otherwise returns the biome key) (#1428)
- Added "Current Dimension" placeholder that returns the dimension the player is in (has option to return the display name of Vanilla dimensions, otherwise returns dimension key) (#1437)
- Added "Item Category" placeholder that returns the creative tab category of the input item key (#1435)
- Added "Hovered Inventory Item" placeholder that returns the item that is hovered in the currently open inventory (player inventory, chest, etc.) (#1434)
- Added "Set Text Input Field Value" action to set the value of an input field (text box) by its element identifier (works for custom and Vanilla elements) (#1392)
- Added "Extract ZIP File In Game Directory" action to extract ZIP files in the game directory or the default .minecraft folder (#1394)
  - Also added a listener called "On ZIP Extracted via Action" that triggers once the ZIP finished extracting
- Added "Open File/Folder In Game Directory" action that opens a file/folder in the game directory or the default .minecraft folder (#1395)
- Added "Play Audio" action to play an audio resource once with configurable sound channel and base volume (#1433)
- Added "Execute Command As Integrated Server" action (#1372)
  - Force-executes a command in singleplayer as the integrated server, ignoring permissions and the cheats setting
  - Does nothing on multiplayer or when the world is opened to LAN
- Added "Stop All Action Audios" action to stop all audio tracks started via the "Play Audio" action
- Added "Animated Texture Started Playing" listener that triggers when an animated texture (FMA, APNG, GIF) starts playing (#1335)
- Added "Animated Texture Finished Playing" listener that triggers when an animated texture (FMA, APNG, GIF) finished playing (#1335)
- Added "On Item Hovered in Inventory" listener that triggers when the users hovers an item in any inventory (player inventory, chests, etc.) (#1432)
- Added "On System Message Received in Chat" listener that triggers when the client receives a system message in chat, like command feedback (#1489)
- Added "Is Hardcore" requirement to check if the currently loaded world is in hardcore mode (#1387)
- Added "Is MC Debug Overlay Enabled" requirement to check if the F3 debug overlay is enabled (#1436)
- Added "Is Item Hovered in Inventory" requirement to check if the user is hovering over an item in any inventory screen (main inventory, chests, etc.) (#1431)
- Added "Is Cursor Holding Inventory Item" requirement to check if the user is holding an item with the mouse in any inventory screen (main inventory, chests, etc.) (#1427)
- Added "Is Camera Perspective" requirement to check for the user's current perspective (first person, third person, front view) (#1375)
- Added "Is Active Cursor Type" requirement that checks if a specific standard cursor type (normal, pointing hand, writing cursor, etc.) is currently the active cursor (#1430)
- Added "Is Modpack Mode Enabled" requirement that checks if FancyMenu's Modpack Mode is enabled (useful for showing "in-dev" debug stuff)
- Added "Is Customization Menu Bar Visible" requirement that checks if FancyMenu's menu bar is visible
- Added "Circle Shape" element, which works similar to the "Rectangle Shape" element (with blur and color support)
- Added "Block/Item JSON Model" element that can render a block/item JSON model loaded from Minecraft's resources or external sources (#1347)
  - Supports setting a custom texture, has rotation controls, light controls, etc.
- Added "EXECUTE LATER" block to the action script system that can hold actions and execute them with a delay in milliseconds (#1497)
  - The block gets queued for that and executed in the main thread after the delay
- Added "Comment" object to the action script system that lets you add comments to your scripts for easier organization and logic explaination (#1465)
- Ported "Is Player Using Item" requirement from Spiffy (#1401)
- Ported "Is Player In Structure" requirement from Spiffy (#1402)
- The "Layer" widget of the layout editor now has support for creating groups that can hold layers for better organization (you can also collapse groups to save space) (#1449)
- "Button" and "Slider" elements got some new features:
  - They can have transparent backgrounds now (without the need to set transparent textures)
  - Labels can now show underlined on hover (without setting a "hover label" text)
  - You can now set a hover color for the label to change its color when button/slider is hovered (without setting a "hover label" text)
  - You can now set a base color for the label to change its default (white) color (without setting a custom label text)
  - There's support for setting the label text scale now
  - Both elements now let you toggle on/off the text shadow of labels
- The file browser screens (choose/save file) got a little glow-up
  - They have a new set of icons and show different icons for audio, video, image and text files now
  - There is a Search bar now to search for files
  - There is a Create Folder button now to create a new folder in the current directory
  - Audio files now have previews (you can listen to them in the browser screens)
  - You can now drag-n-drop files into the file browser to copy them to the current directory
  - The file browser will now reload when files or folders change in the current directory, so you can add/delete files from there outside Minecraft and the in-game file browser will reflect these changes
  - You can use the Arrow keys and Enter key now to navigate in the files list
- Layouts can now get saved to and loaded from subdirectories of "/fancymenu/customization/" (useful when organizing large amounts of layouts)
- It's possible now to press DEL in the Manage Variables screen to delete the selected variable (#1475)
- The "Player Entity" element now has an option to disable the rotation of the nametag (#1454)
- Most color inputs now allow for using a color picker instead of manually typing the color (plain text input still works like before, color pickers are just an alternative way to set the color)
- Menu backgrounds got reworked to be more in line with the new "decoration overlays"
  - You can now enable multiple menu background types in the same layout
  - All menu background customization now happens in the editor's right-click menu, which means no full-screen configuration across 20 screens anymore
- The border display of elements in the layout editor (position, anchor, rotation, etc.) now renders inside the element when there's not enough space to render it outside (#1380)
- The Markdown text color formatting code now also supports common HTML-like color names in addition to HEX, so you can now do "%#red%This is red text%#%" for example (#1368)
  - Available color names: black, silver, gray, grey, white, maroon, red, purple, fuchsia, magenta, green, lime, olive, yellow, navy, blue, teal, aqua, cyan, transparent
- The Parallax intensity for elements and menu backgrounds can now be configured individually for the X and Y axis (instead of combined setting for both, like before) (#1378)
- More of FancyMenu's list-based screens now have search bars
- There's now an option to toggle on/off the screen background overlay in Custom GUIs while in a world (the blur/dark tint) (#1441)
- The Book button in the Inventory screen now has a persistent identifier ("inventory_screen_book_button") to hopefully improve how the customization engine can interact with it (#1098)
- The "Progress Bar" element now supports nine-slicing for bar and background textures (#1444)
- The "Video" element now has an option to disable its aspect ratio preserving behavior, to make it stretch the video frame to the size of the element (#1453)
- The "Image" element how has support for rounding image corners of non-nine-sliced and not-repeated images
- The "Rectangle Shape" element now has support for rounding the shape corners (#1484)
- The "Rectangle Shape" element now has support for enabling blurring, so the shape can be used as a blur background for menu areas, etc. (#1484)
- You can now set an "Unhover Sound" for buttons, sliders and checkboxes, similar to the hover sound, but for unhover (duh) (#1415)
- Rotated buttons and sliders now adjust their "hitbox" to the rotation, so even when rotated you can click/hover the actual visible body instead of the original/not-rotated body
- The "Input Field" element now has support for setting hover, unhover and click sounds
- Most of FancyMenu's simple text inputs (input fields) now allow for selecting text by holding down the mouse and moving over the text
- The "New Element" menu's entries are now ordered alphabetically
- Added support for corner resizing to all elements in the layout editor
- Context and Dropdown menus of FancyMenu now have a search bar (just start typing while a context/dropdown menu is open and see it start filtering entries)
- Context and Dropdown menus of FancyMenu now have full keyboard key navigation support (Arrow keys, Tab, Enter, ESC)
- Improved background menu rendering of Custom GUIs in Popup mode (background menus should now better show their customizations) (#1472)
- Most numeric inputs of elements now support placeholders and a better value setting system with a "number picker" that live-updates for previewing what changes do to the element
- Most color inputs of elements now support setting the color via a color picker that live-updates, so you see how color changes affect the element
- You can now resize elements by simply hovering the element edges instead of the resize grabber
- The text editor got some QoL additions
  - Duplicate Line: Ctrl + D
  - Move Line Up/Down: Alt + Up/Down
  - Go To Start/End: Ctrl + Home / Ctrl + End
  - Go To Line: Ctrl + G (opens input box -> enter number)

### Breaking Changes

- FOR DEVS: This version contains some large changes and refactors to some very fundamental parts of the mod, such as element-related classes, which means you need to update your addons to work with this new build. Sorry for the inconvenience, but it was about time to make some very needed improvements that will ultimately also be beneficial for other devs. Improvements include an improved serialization/deserialization process and more!

- REMOVED all placeholders related to the scoreboard, because they never worked correctly and basically need a full rewrite (#1198)
  - I will add scoreboard placeholders back in the future, but for now it makes no sense to keep them in
  - I also normally never just remove features without prior warning, but I felt it was the only correct action here
  - Removed placeholders: Scoreboard Player Team, Scoreboard Score, Scoreboard Objectives List, Scoreboard Tracked Players, Scoreboard Display Slot, Scoreboard Has Score, Scoreboard Objective Display Name, Scoreboard Objective Criteria, Scoreboard Objective Render Type, Scoreboard Player Scores List, Scoreboard Objective Count, Player Tags List, Player Has Tag

### Bug Fixes

- Fixed "Splash Text" elements not resolving placeholders anymore in MC 1.21.10+ (#1353, #1457)
- Fixed "Replace Text" placeholder canâ€™t replace literal "\" characters (#1456)
- Fixed branding and copyright text in the Title screen being affected by the opacity of other elements/buttons in some Minecraft versions (#1460)
- Fixed a Vanilla bug that made icons of icon buttons (Language and Accessibility buttons) not react to opacity changes in some Minecraft versions
- Fixed (at least tried to fix) a crash related to "Player Entity" elements sometimes failing to get constructed (#1323)
- Fixed menu bar in the Creative Mode Inventory screen sometimes not clickable because the creative mode tabs consume the click (#1046)
- Fixed placeholders not working in playername of Player Entity element anymore in MC 1.21.1+ (#1466)
- Fixed missing localization in "Entity Pose" settings of the "Player Entity" element (#1470)
- Fixed textures of Checkbox element not showing transparency
- Fixed line numbers not rendering in Text Editor screen
- Fixed/Improved some listeners being very heavy on performance (#1490)
- Fixed audio files loaded via resource pack stop working (or play really quiet) when joining a world (#1463, #1365)
- Fixed "Layer" widget in layout editor not showing transparency for its icons in some Minecraft versions

%changelog:end%
